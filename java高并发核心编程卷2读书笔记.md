# java高并发核心编程

## 第一章 多线程原理与实战

### 1.2 无处不在的进程和线程

### 1.2.1 进程的基本概念

**进程的概念**：

什么是进程？所谓的进程就是**一次程序的启动或者执行**，比如连续打开10个谷歌浏览器，同时开启十个游戏等等...，是操作系统将程序**加入到内存**，然后给程序**分配**必要的**系统资源**，并且开始**运行程序的指令**



那么什么是java程序的进程呢？每一次启动java的程序就会启动一个**JVM进程**，在这个JVM进程的内部，所有的java程序代码都是以**线程**的方式运行的，那么线程的入口是什么呢？就是main方法，我们称为**主线程**，在main方法结束后主程序运行完成，JVM进程也就结束了



### 1.2.2 线程的基本概念

要明确两个概念：

进程：是**程序执行**和系统进行**并发调度**，**资源分配**的**最小单位**

线程：是指程序代码段的一次执行流程（参考JVM进程的例子），是CPU进行调度的最小单位，并且一个进程可以有**一个或者多个线程**，并且共享进程的资源

在java程序启动的时候会至少产生两个线程1.main线程 2.GC垃圾回收线程，但是实际上还会有很多的线程会启动



线程的构成：

![](https://github.com/JOYBOY-777/ReadStudyNote/blob/main/javaimg/java%E9%AB%98%E5%B9%B6%E5%8F%91%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B%E5%8D%B7%E4%BA%8C%E5%9B%BE%E7%89%87/%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%9E%84%E6%88%90.png?raw=true)

可以看到他们分为三个部分分别是：

（1）程序计数器：记录着线程**下一条指令**的**地址**，比如程序阻塞之后，在获取到cpu的时间片之后记得线程进行到哪里了

（2）栈内存：是代码段中**局部变量**的存储空间，线程每进入一个方法，方法的局部变量就会进去到栈内存中，并且栈内存是**独立**的，线程之间不共享，JDK1.8线程在创建的时候会分配大概**1M**的栈内存大小，并且**不受**垃圾回收器管理

（3）线程的基本信息：

1. 线程ID：线程的唯一标识
2. 线程名称：线程的名字，用户不自己分配的话系统会自动分配一个名字
3. 线程优先级：表示线程调度的优先级，优先级越高，线程获取CPU时间片的几率就越大
4. 线程状态：标识线程执行的基本状态，比如新建，就绪，运行，阻塞，结束等转状态
5. 其他：是否是守护线程等



在程序执行时，栈内存的结构：

比如以下有一场景在main线程中有不同的方法，在main线程开启之后线程进入方法后main线程的栈帧在进入方法后会JVM会为这个main线程的栈帧分配空间





































































































































































































































































